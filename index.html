<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
<form id="f">
    <label for="text_input">Message: </label>
    <input type="text" id="text_input" />
    <br /><br />
    <input type="submit" value="send message" />
</form>
<input type="button" value="send all" id="send_all" />
<br />
Result: <span id="result"></span>
<script>
    var myWorker;
    function sub(event) {
        var message = document.getElementById('text_input').value;
        myWorker.postMessage(message);
        console.log('myWorker.postMessage: ' + message);
        event.stopPropagation();
        event.preventDefault();
    }
    function send_all() {
        var message = document.getElementById('text_input').value;
        postMessage(message, '*');
        console.log('postMessage (all): ' + message);
    }
    document.getElementById('f').addEventListener('submit', sub, false);
    myWorker = new Worker('assets/worker.js');
    myWorker.onmessage = function(event) {
        document.getElementById('result').innerHTML = event.data;
        console.log('myWorker.onmessage', event.data);
    };
    document.getElementById('send_all').addEventListener('click', send_all, false);
</script>
</body>
</html>