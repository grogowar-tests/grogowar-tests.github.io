<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
<input type="button" value="go" id="go" />
<script>
    window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;
    window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction;
    window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;
    var request;
    function openDB() {
        request = indexedDB.open('myBase', 3);
        request.onerror = function(err) {
            console.log(err);
        };
        request.onsuccess = function() {
            console.log('onsuccess');
            onDbOpen();
        };
        request.onupgradeneeded = function() {
            console.log('onupgradeneeded');
            request.result.createObjectStore("MyObjectStore", {keyPath: "key"});
            openDB();
        };
    }

    function onDbOpen() {
        console.log('openDB');

    }

    document.querySelector("#go").addEventListener('click', openDB);
</script>
</body>
</html>